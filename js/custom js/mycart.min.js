$(document).ready(function(){function t(){$("#bg_layer").hide(),$(".sidebar.right").trigger("sidebar:close")}var a=["left","top","right","bottom"];$("h1 span.version").text($.fn.sidebar.version);for(var e=0;e<a.length;++e){var r=a[e];$(".sidebar."+r).sidebar({side:r})}$(".sl").click(function(){var t=$(this).data("id");if("ru"==t);else;var a="/checkout_en.php";mycart.language($(this).data("id"),a)}),$(document).on("click",".addToCart",function(){var t=$(this).data("id"),a=1,e=$("#options").val();mycart.add(t,a,e)}),$(document).on("click",".delincart",function(){var t=$(this).data("id"),a=$(this).data("size"),e=$(this).data("js"),r=$("#product"+t+"-"+e),n=$("#product-"+t+"-"+e);r.remove(),n.remove(),mycart.remove(t,a)}),$("#btn-checkout").on("click",function(){$(".order-form").slideDown("slow")}),$("#newOrder").on("click",function(){var t=!1,a="";if(""==$("#email").val()&&(t=!0,a="Заполните Email"),""==$("#shiping").val()&&(t=!0,""==a&&(a="Не выбран способ доставки")),t)alert(a);else{var e=$("#order-form").serialize();$.ajax({url:"order.php",type:"POST",data:e,dataType:"json",success:function(t){t.success.length&&($("#bg_layer").append('<div id="modal-success">'+t.success+"</div>"),$("#bg_layer").show(),setTimeout(function(){window.location.replace(""+t.redirect)},5e3)),t.error&&$(".alert").html(t.error)},error:function(){alert("Error!")}})}}),$(".pcount").on("change",function(){var t=$(this).data("id"),a=$(this).data("size"),e=$(this).data("js");mycart.update(t,$(this).val(),a,e)}),$("#bg_layer").hide(),$(".sidebar.right").trigger("sidebar:close"),$("a.btn-danger, #bg_layer").click(function(){t()}),$(".btn[data-action]").on("click",function(){var t=$(this),a=t.attr("data-action"),e=t.attr("data-side");return $(".sidebar."+e).trigger("sidebar:"+a),$("#bg_layer").hide(),!1}),$(".h-cart").on("click",function(){$("#bg_layer").show(),$(".sidebars").show(),$(".sidebar.right").trigger("sidebar:open")})});var mycart={add:function(t,a,e){$.ajax({url:"/cart.php?add",type:"get",data:"id="+t+"&quantity="+(void 0!==a?a:1)+"&options="+e,dataType:"json",success:function(a){$(".sidebars").css("display","block"),$(".count").html(a.count),$(".total").html(a.total),a.html&&$("#product-cart").append(a.html),a.quantity&&$(".quantity"+t+"-"+a.js).html(a.quantity),$("#bg_layer").show(),$(".sidebar.right").trigger("sidebar:open")},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},update:function(t,a,e,r){$.ajax({url:"/cart.php?edit",type:"get",data:"key="+t+"&quantity="+a+"&options="+e,dataType:"json",success:function(n){$(".quantity"+t+"-"+e).html(n.quantity);var o=Number.parseInt($("#price"+t+"-"+r).text())*a;$("#total"+t+"-"+r).html(o),$(".count").html(n.count),$(".total").html(n.total)},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},remove:function(t,a){$.ajax({url:"/cart.php?remove",type:"get",data:"key="+t+"&options="+a,dataType:"json",success:function(t){$(".count").html(t.count),$(".total").html(t.total)},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},clear:function(){$.ajax({url:"/cart.php?clear",type:"get",data:"",dataType:"json",success:function(t){$("#modal-cart").modal("hide"),$(".count").html(t.count),$(".total").html(t.total),$(".right .form-groupe input").val("1"),$(".right .form-groupe").addClass("hide"),$(".addToCart").removeClass("hide")},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},language:function(t,a){$.ajax({url:"/cart.php?language",type:"get",data:"key="+t,dataType:"json",success:function(t){location.reload()},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}};