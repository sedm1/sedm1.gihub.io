$(document).ready(function(){var t=["left","top","right","bottom"];$("h1 span.version").text($.fn.sidebar.version);for(var a=0;a<t.length;++a){var e=t[a];$(".sidebar."+e).sidebar({side:e})}$(".sl").click(function(){var t=$(this).data("id");if("ru"==t);else;mycart.language($(this).data("id"),"/checkout_en.php")}),$("#options").change(function(){$(".size-error").css("display","none"),$("#small-photo li").css("height","174px")}),$(document).on("click",".addToCart",function(){var t=$(this).data("id"),a=$("#options").val();""!==a?($(".size-error").css("display","none"),$("#small-photo li").css("height","174px"),mycart.add(t,1,a)):($(".size-error").css("display","block"),$("#small-photo li").css("height","150px"))}),$(document).on("click",".delincart",function(){var t=$(this).data("id"),a=$(this).data("size"),e=$(this).data("js"),r=$("#product"+t+"-"+e),o=$("#product-"+t+"-"+e);r.remove(),o.remove(),mycart.remove(t,a)}),$("#btn-checkout").on("click",function(){$(".order-form").slideDown("slow")}),$("#newOrder").on("click",function(){var t=!1,a="";if(""==$("#email").val()&&(t=!0,a="Заполните Email"),""==$("#shiping").val()&&(t=!0,""==a&&(a="Не выбран способ доставки")),t)alert(a);else{var e=$("#order-form").serialize();$.ajax({url:"order.php",type:"POST",data:e,dataType:"json",success:function(t){t.success.length&&($("#bg_layer").append('<div id="modal-success">'+t.success+"</div>"),$("#bg_layer").show(),setTimeout(function(){window.location.replace(""+t.redirect)},5e3)),t.error&&$(".alert").html(t.error)},error:function(){alert("Error!")}})}}),$(".pcount").on("change",function(){var t=$(this).data("id"),a=$(this).data("size"),e=$(this).data("js");mycart.update(t,$(this).val(),a,e)}),$("#bg_layer").hide(),$(".sidebar.right").trigger("sidebar:close"),$("a.btn-danger, #bg_layer").click(function(){$("#bg_layer").hide(),$(".sidebar.right").trigger("sidebar:close")}),$(".btn[data-action]").on("click",function(){var t=$(this),a=t.attr("data-action"),e=t.attr("data-side");return $(".sidebar."+e).trigger("sidebar:"+a),$("#bg_layer").hide(),!1}),$(".h-cart").on("click",function(){$("#bg_layer").show(),$(".sidebars").show(),$(".sidebar.right").trigger("sidebar:open")})});var mycart={add:function(a,t,e){$.ajax({url:"/cart.php?add",type:"get",data:"id="+a+"&quantity="+(void 0!==t?t:1)+"&options="+e,dataType:"json",success:function(t){$(".sidebars").css("display","block"),$(".count").html(t.count),$(".total").html(t.total),t.html&&$("#product-cart").append(t.html),t.quantity&&$(".quantity"+a+"-"+t.js).html(t.quantity),$("#bg_layer").show(),$(".sidebar.right").trigger("sidebar:open")},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},update:function(e,r,o,n){$.ajax({url:"/cart.php?edit",type:"get",data:"key="+e+"&quantity="+r+"&options="+o,dataType:"json",success:function(t){$(".quantity"+e+"-"+o).html(t.quantity);var a=Number.parseInt($("#price"+e+"-"+n).text())*r;$("#total"+e+"-"+n).html(a),$(".count").html(t.count),$(".total").html(t.total)},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},remove:function(t,a){$.ajax({url:"/cart.php?remove",type:"get",data:"key="+t+"&options="+a,dataType:"json",success:function(t){$(".count").html(t.count),$(".total").html(t.total)},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},clear:function(){$.ajax({url:"/cart.php?clear",type:"get",data:"",dataType:"json",success:function(t){$("#modal-cart").modal("hide"),$(".count").html(t.count),$(".total").html(t.total),$(".right .form-groupe input").val("1"),$(".right .form-groupe").addClass("hide"),$(".addToCart").removeClass("hide")},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})},language:function(t,a){$.ajax({url:"/cart.php?language",type:"get",data:"key="+t,dataType:"json",success:function(t){location.reload()},error:function(t,a,e){alert(e+"\r\n"+t.statusText+"\r\n"+t.responseText)}})}};